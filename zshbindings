# Last edit on 2014-11-27 
# This file is a part of my zsh configuration. It's sourced from the .zshrc
# file. It contains my key bindings

bindkey -v  #vi keybindings

# History completion on pgup and pgdown
zle -N history-beginning-search-backward-end history-search-end
zle -N history-beginning-search-forward-end history-search-end

if [ "$TERM" = "screen-256color" ]; then
    bindkey "^[[1~" beginning-of-line
    bindkey "^[[4~" end-of-line
else
    bindkey "^[[H" beginning-of-line
    bindkey "^[[F" end-of-line
fi

bindkey "^[[5~" history-beginning-search-backward-end
bindkey "^[[6~" history-beginning-search-forward-end

bindkey "\e[3~" delete-char    # "Entf" or "Del"
bindkey "^[[2;5~" insert-last-word  # STRG+Einfg
bindkey "^W" backward-delete-word    # "Entf" or "Del"
bindkey -s "\C-t" "dirs -v\r" 

run-with-sudo () { LBUFFER="sudo $LBUFFER" }
zle -N run-with-sudo
bindkey '^N' run-with-sudo

# press esc-e for editing command line in $EDITOR or $VISUAL
if  zle -N edit-command-line ; then
    bindkey '\ee' edit-command-line
fi

# press "ctrl-e d" to insert the actual date in the form yyyy-mm-dd
_bkdate() { BUFFER="$BUFFER$(today)"; CURSOR=$#BUFFER; }
zle -N _bkdate
bindkey '^Ed' _bkdate

#Shortcut for \kbd{fg<enter>}
bindkey -s '^z' " &\n"

bindkey '^[[Z' reverse-menu-complete

# Auto quote pasted urls
autoload -Uz url-quote-magic
zle -N self-insert url-quote-magic

autoload -Uz insert-composed-char
zle -N insert-composed-char
bindkey "^K" insert-composed-char

bindkey "^P" zaw
bindkey "^R" zaw-history

bindkey ' ' magic-space  # also do history expansion on space

# Enable autosuggestions automatically
zle-line-init() {
zle autosuggest-start
}

zle -N zle-line-init

export AUTOSUGGESTION_HIGHLIGHT_COLOR='fg=13'
bindkey '^f' vi-forward-blank-word
